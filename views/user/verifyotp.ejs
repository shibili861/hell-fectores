<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Premium Verification | ÉLÉGANCE</title>

<!-- Fonts & Icons -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Cormorant+Garamond:wght@600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- jQuery & SweetAlert -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<style>
/* ====== FIXED MAPPING ONLY (NO LOGIC CHANGE) ====== */

/* Map your HTML classes to existing CSS logic */
.verification-container{
min-height:100vh;
display:flex;
align-items:center;
justify-content:center;
}

.verification-box{
background:#fff;
max-width:440px;
width:100%;
padding:40px;
border-radius:24px;
box-shadow:0 10px 30px rgba(0,0,0,.08);
text-align:center;
}

.verification-icon{
width:72px;
height:72px;
margin:0 auto 24px;
background:linear-gradient(135deg,#0a2540,#1a5c75);
border-radius:18px;
display:flex;
align-items:center;
justify-content:center;
color:#fff;
font-size:28px;
}

.verification-title{
font-family:'Cormorant Garamond',serif;
font-size:28px;
margin-bottom:10px;
color:#0a2540;
}

.verification-subtitle{
font-size:14px;
color:#64748b;
margin-bottom:30px;
}

/* OTP input mapping */
.otp-input-container{
display:flex;
justify-content:center;
gap:12px;
margin-bottom:25px;
}

.otp-input{
width:52px;
height:60px;
font-size:26px;
text-align:center;
font-weight:600;
border:2px solid rgba(10,37,64,.15);
border-radius:12px;
outline:none;
}

.otp-input:focus{
border-color:#d4af37;
}

.otp-input.error{
border-color:#dc2626;
background:rgba(220,38,38,.08);
}

.verify-btn{
width:100%;
padding:16px;
border:none;
border-radius:12px;
background:linear-gradient(135deg,#0a2540,#1a5c75);
color:#fff;
font-size:15px;
font-weight:600;
cursor:pointer;
margin-bottom:20px;
}

.verify-btn:disabled{
opacity:.6;
cursor:not-allowed;
}

/* Resend section */
.resend-container{
margin-top:10px;
}

.resend-btn{
width:100%;
padding:14px;
border:2px solid rgba(10,37,64,.15);
border-radius:12px;
background:none;
font-weight:600;
cursor:pointer;
}

.resend-btn:disabled{
opacity:.5;
cursor:not-allowed;
}

.timer-display{
margin-top:12px;
font-size:14px;
color:#64748b;
}

footer{
margin-top:20px;
text-align:center;
font-size:13px;
color:#64748b;
}
</style>
</head>

<body>

<div class="verification-container">
<div class="verification-box">

<div class="verification-icon">
<i class="fas fa-lock"></i>
</div>

<h1 class="verification-title">Verify Your Account</h1>
<p class="verification-subtitle">
We've sent a 6-digit verification code to your email.
</p>

<form id="otp" onsubmit="return validateOTPForm()">

<div class="otp-input-container">
<input type="text" class="otp-input" maxlength="1" autocomplete="off">
<input type="text" class="otp-input" maxlength="1" autocomplete="off">
<input type="text" class="otp-input" maxlength="1" autocomplete="off">
<input type="text" class="otp-input" maxlength="1" autocomplete="off">
<input type="text" class="otp-input" maxlength="1" autocomplete="off">
<input type="text" class="otp-input" maxlength="1" autocomplete="off">
</div>

<button type="submit" class="verify-btn">Verify Account</button>

<div class="resend-container">
<button type="button" class="resend-btn" id="resendBtn">
<i class="fas fa-redo-alt"></i> Resend Verification Code
</button>
<div class="timer-display" id="timerDisplay">
Available in <span id="timerCount">1:00</span>
</div>
</div>

</form>
</div>
</div>

<footer>
&copy; 2025 LUXSHORE. All rights reserved.
</footer>

<!-- ====== YOUR ORIGINAL SCRIPT (UNCHANGED LOGIC) ====== -->
<script>
document.addEventListener('DOMContentLoaded', function() {
const otpInputs = document.querySelectorAll('.otp-input');
const resendBtn = document.getElementById('resendBtn');
const timerDisplay = document.getElementById('timerDisplay');
const timerCount = document.getElementById('timerCount');

let timeLeft = 60;
let timer;

resendBtn.disabled = true;

function startTimer() {
resendBtn.disabled = true;
timerDisplay.style.display = 'block';
timeLeft = 60;
updateTimerDisplay();

timer = setInterval(() => {
timeLeft--;
updateTimerDisplay();
if (timeLeft <= 0) {
clearInterval(timer);
resendBtn.disabled = false;
timerDisplay.style.display = 'none';
}
}, 1000);
}

function updateTimerDisplay() {
const minutes = Math.floor(timeLeft / 60);
const seconds = timeLeft % 60;
timerCount.textContent = `${minutes}:${seconds.toString().padStart(2,'0')}`;
}

startTimer();

otpInputs.forEach((input, index) => {
input.addEventListener('input', e => {
if (e.target.value && index < otpInputs.length - 1) {
otpInputs[index + 1].focus();
}
});
input.addEventListener('keydown', e => {
if (e.key === 'Backspace' && !e.target.value && index > 0) {
otpInputs[index - 1].focus();
}
});
});

resendBtn.addEventListener('click', function() {
if (resendBtn.disabled) return;
resendBtn.disabled = true;
$.post('/resendotp', res => {
if (res.success) startTimer();
});
});
});

function validateOTPForm() {
let otpCode = '';
document.querySelectorAll('.otp-input').forEach(input => otpCode += input.value);

if (otpCode.length !== 6) {
Swal.fire('Invalid OTP','Please enter all 6 digits','error');
return false;
}

$.ajax({
type: 'POST',
contentType: 'application/json',
url: '/verifyotp',
data: JSON.stringify({ otp: otpCode }),
success: function(response) {
if (response.success) {
Swal.fire('Verified','Redirecting...','success')
.then(()=>window.location.href=response.redirectUrl||'/user/home');
} else {
Swal.fire('Error',response.message||'Invalid OTP','error');
}
}
});

return false;
}
</script>

</body>
</html>
